# 1 Network,1 Host,1 Fip
```
                                                                                                                                      xxx x   xx
                                                                                                                                      x         x
                                                                                                                                      x         xxx   xx
                            Compute Host 1                                                                                           x      xxx  xx     xx
  ┌───────────────────────────────────────────────────────────────────────────────┐                                              xxxxx                   x
  │                                                                               │                                              x                      xx
  │  ┌────────────────────────┐                         ┌─────────────────┐       │                                               x                         xx
  │  │                        │                         │                 │       │                                              xxx                          x
  │  │                        │                         │                 │       │                                          xx x                              x
  │  │        router-ns       │169.254.31.238(rfp)      │                 │       │                                         xx                                 x
  │  │                        ├─────────────────────────┤                 │       │                                         xx           xx              xxxxxx
  │  │ 172.16.18.1            │      169.254.31.239(fpr)│    fip-ns       │       │                                           x      x    x       xx      x
  │  └─────────────────────┬──┘                         │                 │       │                                                       xx      xxxx
  │    ▲                   │                            │                 │       │                                                         xxxxxx   xx    x
  │    │                   │vport-router                │ 192.168.100.254 │       │                                                                    xxxxx
  │    │                   │                            └──────┬──────────┘       │                                                        Internet
  │  ┌─┼───────────────────┴──────┐                            ▲                  │                                                           │
  │  │ │                          │                            │                  │                                                           │
  │  │ │                          │                            │                  │                                                           │
  │  │ │                          │                            │                  │                                                           │
  │  │ │                          │                            │                  │                                                           │
  │  │ │                          │                            │                  │                                                           │
  │  │ │                          │            vport-fip       │                  │                                                           │
  │  │ │                          │◄───────────────────────────┘                  │                                                           │
  │  │ │                          │                                               │                                                           │
  │  │ │          BR-INT (OVS)    │                                               │                                                           │
  │  │ │                          │vport-br-int                                   │                                                           │
  │  │ │                          │◄──────────┐                                   │                                                           │
  │  │ │                          │           │                                   │                                                           │
  │  │ │                          │           │                                   │                                                           │
  │  │ │                          │           │                                   │                                                           │
  │  │ │                          │           │                                   │                                                           │
  │  │ │                          │           │                                   │                                                           │
  │  │ │                          │           │ peer type                         │                                                           │
  │  │ │                          │           │                                   │                                                           │
  │  │ │                          │           │                                   │                                                           │
  │  └─┼──────────────────────────┘           │                                   │                                                           │
  │    │                                      │                                   │                                                           │
  │    │                                      │         ┌──────────────┐          │                                                           │
  │    │                                      │         │              │          │                                                           │
  │    │                                      │         │              │          │                                                           │
  │    ▼                                      │         │              │          ├─────┐                                                     │
  │  ┌─────────────────┐                      └────────►│              │          │     │                                                     │
  │  │  172.16.18.100  │                    vport-br-ex │    BR-EX     │          │     │              192.168.100.0/24                       │
  │  │  192.168.100.150│                                │              ├──────────┼─────┼─────────────────────────────────────────────────────┘
  │  │                 │                                │              │          │     │
  │  │      VM         │                                │              │          ├─────┘
  │  │                 │                                │              │          │ enp7s0
  │  │                 │                                └──────────────┘          │
  │  └─────────────────┘                                                          │
  │                                                                               │
  └───────────────────────────────────────────────────────────────────────────────┘
  ```
-----------------------------------------------------------------------------------------------------------------------------------------------------------
# 2 Network,1 Host,2 Fip
```
                                                                                                                                      xxx x   xx
                                                                                                                                      x         x
                                                                                                                                      x         xxx   xx
                            Compute Host 1                                                                                           x      xxx  xx     xx
  ┌─────────────────────────────────────────────────────────────────────────────────┐                                              xxxxx                   x
  │                                                                                 │                                              x                      xx
  │  ┌──────────────────────────┐                         ┌─────────────────┐       │                                               x                         xx
  │  │                          │                         │                 │       │                                              xxx                          x
  │  │                          │                         │                 │       │                                          xx x                              x
  │  │        router-ns         │169.254.31.238(rfp)      │                 │       │                                         xx                                 x
  │  │                          ├─────────────────────────┤                 │       │                                         xx           xx              xxxxxx
  │  │ 172.16.18.1  172.16.19.1 │      169.254.31.239(fpr)│    fip-ns       │       │                                           x      x    x       xx      x
  │  └───────────────────────┬──┘                         │                 │       │                                                       xx      xxxx
  │    ▲                  ▲  │                            │                 │       │                                                         xxxxxx   xx    x
  │    │                  │  │vport-router                │ 192.168.100.254 │       │                                                                    xxxxx
  │    │                  │  │                            └──────┬──────────┘       │                                                        Internet
  │  ┌─┼──────────────────┼──┴──────┐                            ▲                  │                                                           │
  │  │ │                  │         │                            │                  │                                                           │
  │  │ │                  │         │                            │                  │                                                           │
  │  │ │                  │         │                            │                  │                                                           │
  │  │ │                  │         │                            │                  │                                                           │
  │  │ │                  │         │                            │                  │                                                           │
  │  │ │                  │         │            vport-fip       │                  │                                                           │
  │  │ │                  │         │◄───────────────────────────┘                  │                                                           │
  │  │ │                  │         │                                               │                                                           │
  │  │ │   BR-INT (OVS)   │         │                                               │                                                           │
  │  │ │                  │         │vport-br-int                                   │                                                           │
  │  │ │                  │         │◄──────────┐                                   │                                                           │
  │  │ │                  │         │           │                                   │                                                           │
  │  │ │                  │         │           │                                   │                                                           │
  │  │ │                  │         │           │                                   │                                                           │
  │  │ │                  │         │           │                                   │                                                           │
  │  │ │                  │         │           │                                   │                                                           │
  │  │ │                  │         │           │ peer type                         │                                                           │
  │  │ │                  │         │           │                                   │                                                           │
  │  │ │                  │         │           │                                   │                                                           │
  │  └─┼──────────────────┼─────────┘           │                                   │                                                           │
  │    │                  │                     │                                   │                                                           │
  │    │                  │                     │       ┌──────────────┐            │                                                           │
  │    │                  │                     │       │              │            │                                                           │
  │    │                  │                     │       │              │            │                                                           │
  │    ▼                  ▼                     │       │              │            ├─────┐                                                     │
  │ ┌─────────────────┐ ┌─────────────────┐     └──────►│              │            │     │                                                     │
  │ │  172.16.18.100  │ │  172.16.19.100  │ vport-br-ex │    BR-EX     │            │     │              192.168.100.0/24                       │
  │ │  192.168.100.150│ │  192.168.100.160│             │              ├────────────┼─────┼─────────────────────────────────────────────────────┘
  │ │                 │ │                 │             │              │            │     │
  │ │      VM         │ │      VM         │             │              │            ├─────┘
  │ │                 │ │                 │             │              │            │ enp7s0
  │ │                 │ │                 │             └──────────────┘            │
  │ └─────────────────┘ └─────────────────┘                                         │
  │                                                                                 │
  └─────────────────────────────────────────────────────────────────────────────────┘
  ```  

# 1 Network,2 Host,2 Fip
```
                                                                                                                                                           xx x   xx
                                                                                                                                                          x         x
                                                                                                                                                          x         xxx   xx
                                                Compute Host 1                                                                                           x      xxx  xx     xx
                      ┌───────────────────────────────────────────────────────────────────────────────┐                                              xxxxx                   x
                      │                                                                               │                                              x                      xx
                      │  ┌────────────────────────┐                         ┌─────────────────┐       │                                               x                         xx
                      │  │                        │                         │                 │       │                                              xxx                          x
                      │  │             router-ns  │                         │                 │       │                                          xx x                              x
                      │  │                        │169.254.31.238           │                 │       │                                         xx                                 x
                      │  │                        ├─────────────────────────┤                 │       │                                         xx           xx              xxxxxx
                      │  │ 172.16.18.1            │           169.254.31.239│    fip-ns       │       │                                           x      x    x       xx      x
                      │  └─────────────────────┬──┘                         │                 │       │                                                       xx      xxxx
                      │                      ▲ │                            │                 │       │                                                         xxxxxx   xx    x
                      │                      │ │                            │ 192.168.100.254 │       │                                                                    xxxxx
                      │                      │ │                            └─────────────────┘       │                                                        Internet
                      │  ┌───────────────────┼─┴──────┐                            ▲                  │                                                           │
                      │  │                   │        │                            │                  │                                                           │
                      │  │    BR-INT (OVS)   │        │◄───────────────────────────┘                  │                                                           │
                      │  │                   │        │                                               │                                                           │
                      │  │                   │        │◄──────────┐                                   │                                                           │
                      │  └───────────────────┼────────┘           │                                   │                                                           │
                      │          ▲           │                    │                                   │                                                           │
                      │          │           │                    │                                   │                                                           │
                      │          │           │                    │                                   │                                                           │
                      │          │           │                    │                                   │                                                           │
                      │          ▼           │                    │                                   │                                                           │
                      │   ┌────────────────┐ │                    │                                   │                                                           │
                      │   │                │ │                    │                                   │                                                           │
                      │   │br-host-1(OVS)  │ │                    │                                   │                                                           │
                      │   │                │ │                    │                                   │                                                           │
                      │   └────────────────┘ │                    │                                   │                                                           │
                      │         ▲            │                    │                                   │                                                           │
                      │         │            │                    │                                   │                                                           │
                      │         │            │                    │                                   │                                                           │
                      │         │            │                    │                                   │                                                           │
                      │         │            │                    │                                   │                                                           │
                      │         │            │                    │         ┌──────────────┐          │                                                           │
                      │         │            │                    │         │              │          │                                                           │
                      │         │            │                    │         │              │          │                                                           │
               ┌──────┤         │            ▼                    │         │              │          ├─────┐                                                     │
               │      │         │    ┌─────────────────┐          └────────►│              │          │     │                                                     │
               │      │         │    │  172.16.18.100  │                    │ BR-EX(OVS)   │          │     │                  192.168.100.0/24                   │
   ┌───────────┤      │◄────────┘    │  192.168.100.150│                    │              ├──────────┼─────┼─────────────────────────────────────────────────────┤
   │           │      │              │                 │                    │              │          │     │                                                     │
   │           └──────┤              │      VM         │                    │              │          ├─────┘                                                     │
   │            enp1s0│              └─────────────────┘                    │              │          │ enp7s0                                                    │
   │                  │                                                     └──────────────┘          │                                                           │
   │192.168.122.6     │                                                                               │                                                           │
   │                  │                                                                               │                                                           │
   │                  └───────────────────────────────────────────────────────────────────────────────┘                                                           │
   │                                                                                                                                                              │
   │                                                                                                                                                              │
   │                                                                                                                                                              │
   │                                                                                                                                                              │
   │                                                                                                                                                              │
   │                                                                                                                                                              │
   │                                                                                                                                                              │
   │                                          Compute Host 2                                                                                                      │
   │                ┌─────────────────────────────────────────────────────────────────────────────────┐                                                           │
   │                │                                                                                 │                                                           │
   │                │                                                                                 │                                                           │
   │                │                                                                                 │                                                           │
   │                │                                                                                 │                                                           │
   │                │                                                                                 │                                                           │
   │                │  ┌──────────────────────────────┐                                               │                                                           │
   │                │  │                              │                                               │                                                           │
   │                │  │                              │                                               │                                                           │
   │                │  │     BR-INT (OVS)             │vport-br-in                                    │                                                           │
   │                │  │                              ├───────────┐                                   │                                                           │
   │                │  │                              │           │                                   │                                                           │
   │                │  └──────────────────────────────┘           │                                   │                                                           │
   │                │          ▲            ▲                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          ▼            │                     │                                   │                                                           │
   │                │   ┌────────────────┐  │                     │                                   │                                                           │
   │                │   │                │  │                     │ peer type                         │                                                           │
   │                │   │                │  │                     │                                   │                                                           │
   │                │   │ br-host-2(OVS) │  │                     │                                   │                                                           │
   │                │   │                │  │                     │                                   │                                                           │
   │                │   └────────────────┘  │                     │                                   │                                                           │
   │                │          ▲            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │                                   │                                                           │
   │                │          │            │                     │       ┌──────────────┐            │                                                           │
   │                │          │            │                     │       │              │            │                                                           │
   │192.168.122.33  │          │            │                     │       │              │            │                                                           │
   │         ┌──────┤          │            ▼                     │       │              │            ├─────┐                                                     │
   │         │      │          │        ┌─────────────────┐       └───────┤              │            │     │                                                     │
   └─────────┤      │ ◄────────┘        │  172.16.18.100  │    port-br-ex │ BR-EX(OVS)   │            │     │                 192.168.100.0/24                    │
             │      │                   │  192.168.100.150│               │              ├────────────┼─────┼─────────────────────────────────────────────────────┘
             │      │                   │                 │               │              │            │     │
             └──────┤                   │      VM         │               │              │            ├─────┘
              enp1s0│                   └─────────────────┘               │              │            │ enp7s0
                    │                                                     └──────────────┘            │
                    │                                                                                 │
                    │                                                                                 │
                    └─────────────────────────────────────────────────────────────────────────────────┘
```  

# 2 Network,2 Host,2 Fip
```
                                                                                                                                                        xxx x   xx
                                                                                                                                                        x         x
                                                                                                                                                        x         xxx   xx
                                              Compute Host 1                                                                                           x      xxx  xx     xx
                    ┌───────────────────────────────────────────────────────────────────────────────┐                                              xxxxx                   x
                    │                                                                               │                                              x                      xxxx
                    │  ┌───────────────────────────┐                                                │                                               x                         x
                    │  │                           │                           ┌─────────────────┐  │                                              xxx                         x
                    │  │         router-ns         │    (rfp)                  │                 │  │                                          xx x                            x
                    │  │                           │169.254.31.238             │                 │  │                                         xx                            xxx
                    │  │                           │◄─────────────────────────►│                 │  │                                         xx           xx              xxx
                    │  │ 172.16.18.1    172.16.19.1│             169.254.31.239│    fip-ns       │  │                                           x      x    x       xx      x
                    │  └──────────────┬────┬─┬─────┘                 (fpr)     │                 │  │                                                       xx      xxxx
                    │                 │    │ │                                 │ 192.168.100.254 │  │                                                         xxxxxx   xx    x
                    │                 │    │ │                                 │                 │  │                                                                    xxxxx
                    │                 │    │ │                                 └─────────────────┘  │                                                        Internet
                    │  ┌──────────────┼────┼─┴───┐                                      ▲           │                                                           │
                    │  │              │    │     │                                      │           │                                                           │
                    │  │              │    │     │◄─────────────────────────────────────┘           │                                                           │
                    │  │   br-int(OVS)│    │     │                                                  │                                                           │
                    │  │              │    │     │  vport-br-in                                     │                                                           │
                    │  │              │    │     │◄─────────────┐                                   │                                                           │
                    │  └────┬─────────┼────┼─────┘              │                                   │                                                           │
                    │       │         │    │                    │                                   │                                                           │
                    │       │         │    │                    │                                   │                                                           │
                    │       │         │    │                    │                                   │                                                           │
                    │       │         │    │                    │                                   │                                                           │
                    │ ┌─────┴──────┐  │    │                    │                                   │                                                           │
                    │ │            │  │    │                    │                                   │                                                           │
                    │ │br-tun0(OVS)│  │    │                    │                                   │                                                           │
                    │ │            │  │    │                    │                                   │                                                           │
                    │ └─────┬──────┘  │    │                    │                                   │                                                           │
                    │       │         │    │                    │                                   │                                                           │
                    │       │         │    │                    │peer type                          │                                                           │
                    │       │         │    │                    │                                   │                                                           │
                    │       │         │ ┌──┴────────────┐       │                                   │                                                           │
                    │       │         │ │ 172.16.19.100 │       │                                   │                                                           │
                    │       │         │ │192.168.100.160│       │                                   │                                                           │
                    │       │         │ │      VM       │       │          ┌──────────────┐         │                                                           │
                    │       │         │ └───────────────┘       │          │              │         │                                                           │
                    │       │         │                         │          │              │         │                                                           │
             ┌──────┤       │         │                         │          │              │         ├─────┐                                                     │
             │      │       │      ┌──┴────────────┐            │          │              │         │     │                                                     │
             │      │       │      │ 172.16.18.100 │            │          │  br-ex(OVS)  │         │     │                  192.168.100.0/24                   │
 ┌───────────┤      ├───────┘      │192.168.100.150│            └─────────►│              ├─────────┼─────┼─────────────────────────────────────────────────────┤
 │           │      │              │      VM       │            port-br-ex │              │         │     │                                                     │
 │           └──────┤              └───────────────┘                       │              │         ├─────┘                                                     │
 │            enp1s0│                                                      │              │         │ enp7s0                                                    │
 │                  │                                                      └──────────────┘         │                                                           │
 │                  │                                                                               │                                                           │
 │                  │                                                                               │                                                           │
 │                  └───────────────────────────────────────────────────────────────────────────────┘                                                           │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                          Compute Host 2                                                                                                      │
 │                ┌─────────────────────────────────────────────────────────────────────────────────┐                                                           │
 │                │                                                                                 │                                                           │
 │                │ ┌─────────────────────────────────┐                                             │                                                           │
 │                │ │                                 │port-br-in                                   │                                                           │
 │                │ │     br-int(OVS)                 ├──────────────────────────┐                  │                                                           │
 │                │ │                                 │                          │                  │                                                           │
 │                │ │                                 │                          │                  │                                                           │
 │                │ └──────┬──────────────────────────┘                          │                  │                                                           │
 │                │        │           ▲         ▲                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │peer type         │                                                           │
 │                │ ┌──────┴─────┐     │         │                               │                  │                                                           │
 │                │ │            │     │         │                               │                  │                                                           │
 │                │ │br-tun(OVS) │     │         │                               │                  │                                                           │
 │                │ │            │     │         │                               │                  │                                                           │
 │                │ └──────┬─────┘     │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         ▼                               │                  │                                                           │
 │                │        │           │ ┌────────────────┐                      │                  │                                                           │
 │                │        │           │ │ 172.16.19.200  │                      │                  │                                                           │
 │                │        │           │ │ 192.168.100.170│                      │                  │                                                           │
 │                │        │           │ │     VM         │                      │port-br-ex        │                                                           │
 │                │        │           │ └────────────────┘                 ┌────┴───────┐          │                                                           │
 │                │        │           │                                    │            │          │                                                           │
 │         ┌──────┤        │           ▼                                    │            │          ├─────┐                                                     │
 │         │      │        │    ┌────────────────┐                          │            │          │     │                                                     │
 └─────────┤      │ ◄──────┘    │ 172.16.18.200  │                          │            │          │     │                 192.168.100.0/24                    │
           │      │             │ 192.168.100.180│                          │ br-ex(OVS) ├──────────┼─────┼─────────────────────────────────────────────────────┘
           │      │             │     VM         │                          │            │          │     │
           └──────┤             └────────────────┘                          │            │          ├─────┘
            enp1s0│                                                         │            │          │ enp7s0
                  │                                                         └────────────┘          │
                  │                                                                                 │
                  │                                                                                 │
                  └─────────────────────────────────────────────────────────────────────────────────┘
```