# Topology

## 2 Network,3 Host,6 Fip
```
                                                                                                                                                        xxx x   xx
                                                                                                                                                        x         x
                                                                                                                                                        x         xxx   xx
                                              Compute Host 1                                                                                           x      xxx  xx     xx
                    ┌───────────────────────────────────────────────────────────────────────────────┐                                              xxxxx                   x
                    │                                   (rfp)                                       │                                              x                      xxx xx
                    │  ┌───────────────────────────┐169.254.31.238               ┌────────────────┐ │                                               x                           x
                    │  │                           ├─────────────────────────────┤                │ │                                              xxx                          x
                    │  │                           │               169.254.31.239│    fip-ns      │ │                                          xx x                            x
                    │  │                           │                      (fpr)  │                │ │                                         xx                            x x
                    │  │         router-ns         │                             │ 192.168.100.254│ │                                         xx           xx              xx x
                    │  │172.16.18.1     172.16.19.1│                             └─────────┬──────┘ │                                           x      x    x       xx      x
                    │  └─────┬───────┬─────┬───┬───┘                                       │        │                                                       xx      xxxx
                    │        │       │     │   │                                           │        │                                                         xxxxxx   xx     x
                    │        │       │     │   │                                           │        │                                                                    xxxx x
                    │        │       │     │   │                                           │        │                                                        Internet
                    │  ┌─────┴───────┼─────┼───┴─┐                                         │        │                                                           │
                    │  │             │     │     │                                         │        │                                                           │
                    │  │             │     │     │                                         │        │                                                           │
                    │  │ br-int(OVS) │     │     ├─────────────────────────────────────────┘        │                                                           │
                    │  │             │     │     │  vport-br-in                                     │                                                           │
                    │  │             │     │     │◄─────────────┐                                   │                                                           │
                    │  └────┬────────┼─────┼─────┘              │                                   │                                                           │
                    │       │        │     │                    │                                   │                                                           │
                    │       │        │     │                    │                                   │                                                           │
                    │       │        │     │                    │                                   │                                                           │
                    │       │        │     │                    │                                   │                                                           │
                    │ ┌─────┴──────┐ │     │                    │                                   │                                                           │
                    │ │            │ │     │                    │                                   │                                                           │
                    │ │br-tun0(OVS)│ │     │                    │                                   │                                                           │
                    │ │            │ │     │                    │                                   │                                                           │
                    │ └─────┬──────┘ │     │                    │                                   │                                                           │
                    │       │        │     │                    │                                   │                                                           │
                    │       │        │     │                    │peer type                          │                                                           │
                    │       │        │     ▼                    │                                   │                                                           │
                    │       │        │  ┌───────────────┐       │                                   │                                                           │
                    │       │        │  │ 172.16.19.100 │       │                                   │                                                           │
                    │       │        │  │192.168.100.160│       │                                   │                                                           │
                    │       │        │  │      VM       │       │          ┌──────────────┐         │                                                           │
                    │       │        │  └───────────────┘       │          │              │         │                                                           │
                    │       │        │                          │          │              │         │                                                           │
             ┌──────┤       │        ▼                          │          │              │         ├─────┐                                                     │
             │      │       │   ┌───────────────┐               │          │              │         │     │                                                     │
             │      │       │   │ 172.16.18.100 │               │          │  br-ex(OVS)  │         │     │                  192.168.100.0/24                   │
 ┌───────────┤      ├───────┘   │192.168.100.150│               └─────────►│              ├─────────┼─────┼─────────────────────────────────────────────────────┤
 │           │      │           │      VM       │               port-br-ex │              │         │     │                                                     │
 │           └──────┤           └───────────────┘                          │              │         ├─────┘                                                     │
 │            enp1s0│                                                      │              │         │ enp7s0                                                    │
 │                  │                                                      └──────────────┘         │                                                           │
 │                  │                                                                               │                                                           │
 │                  │                                                                               │                                                           │
 │                  └───────────────────────────────────────────────────────────────────────────────┘                                                           │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                          Compute Host 2                                                                                                      │
 │                ┌─────────────────────────────────────────────────────────────────────────────────┐                                                           │
 │                │                                                                                 │                                                           │
 │                │     ┌─────────────────────────────┐                                             │                                                           │
 │                │     │                             │port-br-in                                   │                                                           │
 │                │     │                             ├──────────────────────────────┐              │                                                           │
 │                │     │                             │                              │              │                                                           │
 │                │     │     br-int(OVS)             ├─────────────────────┐        │              │                                                           │
 │                │     │                             │                     │        │              │                                                           │
 │                │     │                             ├──────┐              │        │              │                                                           │
 │                │     │                             │      │              │        │              │                                                           │
 │                │     └──┬───────────┬─────────┬────┘      │              │        │              │                                                           │
 │                │        │           │         │           │              │        │              │                                                           │
 │                │        │           │         │           │              │        │              │                                                           │
 │                │        │           │         │           │              │        │              │                                                           │
 │                │        │           │         │           │              │        │              │                                                           │
 │                │        │           │         │      ┌────▼──────┐       │        │              │                                                           │
 │                │        │           │         │      │172.16.18.2│       │        │              │                                                           │
 │                │        │           │         │      │dhcp-ns    │       │        │              │                                                           │
 │                │        │           │         │      └───────────┘       │        │              │                                                           │
 │                │        │           │         │                          │        │              │                                                           │
 │                │        │           │         │                    ┌─────▼─────┐  │              │                                                           │
 │                │        │           │         │                    │172.16.19.2│  │              │                                                           │
 │                │ ┌──────┴─────┐     │         │                    │dhcp-ns    │  │peer typ e    │                                                           │
 │                │ │            │     │         │                    └───────────┘  │              │                                                           │
 │                │ │br-tun(OVS) │     │         │                                   │              │                                                           │
 │                │ │            │     │         │                                   │              │                                                           │
 │                │ └──────┬─────┘     │         │                                   │              │                                                           │
 │                │        │           │         │                                   │              │                                                           │
 │                │        │           │         │                                   │              │                                                           │
 │                │        │           │         │                                   │              │                                                           │
 │                │        │           │         │                                   │              │                                                           │
 │                │        │           │ ┌───────┴────────┐                          │              │                                                           │
 │                │        │           │ │ 172.16.19.200  │                          │              │                                                           │
 │                │        │           │ │ 192.168.100.170│                          │              │                                                           │
 │                │        │           │ │     VM         │                          │port-br-ex    │                                                           │
 │                │        │           │ └────────────────┘                     ┌────┴───────┐      │                                                           │
 │                │        │           │                                        │            │      │                                                           │
 │         ┌──────┤        │           │                                        │            │      ├─────┐                                                     │
 │         │      │        │    ┌──────┴─────────┐                              │            │      │     │                                                     │
 ├─────────┤      │ ◄──────┘    │ 172.16.18.200  │                              │            │      │     │                 192.168.100.0/24                    │
 │         │      │             │ 192.168.100.180│                              │ br-ex(OVS)─┼──────┼─────┼─────────────────────────────────────────────────────┤
 │         │      │             │     VM         │                              │            │      │     │                                                     │
 │         └──────┤             └────────────────┘                              │            │      ├─────┘                                                     │
 │          enp1s0│                                                             │            │      │ enp7s0                                                    │
 │                │                                                             └────────────┘      │                                                           │
 │                │                                                                                 │                                                           │
 │                │                                                                                 │                                                           │
 │                └─────────────────────────────────────────────────────────────────────────────────┘                                                           │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                                                                                                                                              │
 │                                          Compute Host 3                                                                                                      │
 │                ┌─────────────────────────────────────────────────────────────────────────────────┐                                                           │
 │                │                                                                                 │                                                           │
 │                │ ┌─────────────────────────────────┐                                             │                                                           │
 │                │ │                                 │port-br-in                                   │                                                           │
 │                │ │     br-int(OVS)                 ├──────────────────────────┐                  │                                                           │
 │                │ │                                 │                          │                  │                                                           │
 │                │ │                                 │                          │                  │                                                           │
 │                │ └──────┬──────────────────────────┘                          │                  │                                                           │
 │                │        │           ▲         ▲                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │peer type         │                                                           │
 │                │ ┌──────┴─────┐     │         │                               │                  │                                                           │
 │                │ │            │     │         │                               │                  │                                                           │
 │                │ │br-tun(OVS) │     │         │                               │                  │                                                           │
 │                │ │            │     │         │                               │                  │                                                           │
 │                │ └──────┬─────┘     │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         │                               │                  │                                                           │
 │                │        │           │         ▼                               │                  │                                                           │
 │                │        │           │ ┌────────────────┐                      │                  │                                                           │
 │                │        │           │ │ 172.16.19.210  │                      │                  │                                                           │
 │                │        │           │ │ 192.168.100.190│                      │                  │                                                           │
 │                │        │           │ │     VM         │                      │port-br-ex        │                                                           │
 │                │        │           │ └────────────────┘                 ┌────┴───────┐          │                                                           │
 │                │        │           │                                    │            │          │                                                           │
 │         ┌──────┤        │           ▼                                    │            │          ├─────┐                                                     │
 │         │      │        │    ┌────────────────┐                          │            │          │     │                                                     │
 └─────────┤      │ ◄──────┘    │ 172.16.18.210  │                          │            │          │     │                                                     │
           │      │             │ 192.168.100.200│                          │ br-ex(OVS) ├──────────┼─────┼─────────────────────────────────────────────────────┘
           │      │             │     VM         │                          │            │          │     │
           └──────┤             └────────────────┘                          │            │          ├─────┘
            enp1s0│                                                         │            │          │ enp7s0
                  │                                                         └────────────┘          │
                  │                                                                                 │
                  │                                                                                 │
                  └─────────────────────────────────────────────────────────────────────────────────┘
```